<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beco - Configura tu espacio</title>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>

    <!-- Loading screen -->
    <div id="preloader"></div>


    <div class="app">
        <!-- Primer container principal: Viewer -->
        <div class="viewer">
            <div class="business">
                <img class="logo"
                    src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/1947dff9-a45b-4143-8c7b-0cd91a1067cf/Logo_saplay_copy.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220514%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220514T182916Z&X-Amz-Expires=86400&X-Amz-Signature=3ee64970347c63524ddc687d23a10f493ad81186ef756943520ab4a63a8694f6&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Logo%2520saplay%2520copy.png%22&x-id=GetObject"
                    alt="logo">
                <h2 class="title">Beco - Configura tu espacio</h2>
            </div>

            <iframe src="" id="api-frame" allowfullscreen mozallowfullscreen="true"
                webkitallowfullscreen="true"></iframe>
        </div>


        <!-- Segundo container principal: Diseño -->
        <div class="design">
            <!-- Estas son las opciones de material (si se quiere editar hay que ir al script de sketchfab) -->
            <div class="options"></div>

            <div class="details">
                <div class="actual">
                    <h4>
                        Diseño actual
                    </h4>
                    <img class="actual-img" id="imageid" src="https://i.ibb.co/qdNdhwW/Wood-Floor040-2-K-Color.jpg"
                        alt="1">
                    <div class="zoom-text">
                        Acerca el mouse para hacer zoom
                    </div>
                </div>
                <div class="description">
                    <h4>
                        Sobre el producto
                    </h4>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. <br><br>
                        Mauris euismod, nunc eget consectetur consectetur,<br>
                        nisi nunc ultricies nunc, euismod eget nunc.
                    </p>
                </div>
            </div>

            <div class="mail">
                <h4>Cotiza la configuración actúal</h4>
                <p>Te contactaremos a tu mail para entrar en detalles</p>
                <!-- <div class="submit">
                    <input class="mail-input" type="text" placeholder="ingresa tu mail">
                    <button class="submit-btn">enviar</button>
                </div> -->
                <div class="submit">
                    <!-- modify this form HTML and place wherever you want your form -->
                    <form action="https://formspree.io/f/mgedrndl" method="POST">
                        <div class="submit-container">
                            <div class="inputs">
                                <label>
                                    <input class="mail-input" type="email" name="email" placeholder="Ingresa tu mail">
                                </label>
                                <label>
                                    <textarea class="textarea" name="message"
                                        placeholder="Que textura(s) te gustaria cotizar"></textarea>
                                </label>
                            </div>
                            <button class="submit-btn" type="submit">Enviar</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <script>
        function doTimeout(ms) {
            setTimeout(function () {
                var ids = window.ids; //is non empty
            }, ms);
        }

        function sleep(ms, callback) {
            var start = new Date().getTime(), expire = start + ms;
            while (new Date().getTime() < expire) { }
            callback(ms);
        }

        var loader = document.getElementById('preloader');
        document.getElementById('api-frame').onload = async function () {
            sleep(10000, doTimeout);
            loader.style.display = 'none';

            // alert('myframe is loaded');
        };
    </script>

</body>

<!-- SCRIPTS -->

<!-- Funcion que cambia la imagen de referencia -->
<script>
    function change_texture(texture) {
        console.log(texture);
        if (texture == "1") {
            document.getElementById("imageid").src = "https://i.ibb.co/qdNdhwW/Wood-Floor040-2-K-Color.jpg";    // aqui va la imagen asociada con la textura 1
            document.getElementById("imageid").alt = "1";
        } else if (texture == "2") {
            document.getElementById("imageid").src = "https://i.ibb.co/Rh0ksQs/Wood041-1-K-Color.jpg";
            document.getElementById("imageid").alt = "2";
        } else if (texture == "3") {
            document.getElementById("imageid").src = "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg";
            document.getElementById("imageid").alt = "3";
        } else if (texture == "4") {
            document.getElementById("imageid").src = "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg";
            document.getElementById("imageid").alt = "4";
        } else if (texture == "5") {
            document.getElementById("imageid").src = "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg";
            document.getElementById("imageid").alt = "5";
        } else if (texture == "6") {
            document.getElementById("imageid").src = "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg";
            document.getElementById("imageid").alt = "6";
        } else if (texture == "7") {
            document.getElementById("imageid").src = "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg";
            document.getElementById("imageid").alt = "7";
        }
    }
</script>

<!-- Scripts para hacer funcionar sketchfab y cambiar las texturas -->
<script type=" text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.3.2.js"></script>
<script type="text/javascript" src="./SketchfabConfigurator-1.0.6.js"></script>
<script type="text/javascript">
    var config = {
        "model": "f12eb4bb124d4d4faf9257b7c91c1742",
        "params": {
            "camera": 0,
            "preload": 1,
            "ui_controls": 0,
            "ui_infos": 0,
            "ui_watermark": 0
        },
        // Aqui puedes agregar o quitar funciones/opciones (texturas, colores, toggles, etc)
        "config": [

            // Opcion 1. para cambiar las texturas
            {
                "name": "Texturas",
                "material": "Material.001",
                "channels": [
                    "AlbedoPBR"
                ],
                "type": "texture",
                // Aqui se pueden modificar las texturas
                "options": [
                    { "name": "Madera 01", "url": "https://i.ibb.co/qdNdhwW/Wood-Floor040-2-K-Color.jpg", "texture": 1 }, { "name": "Madera 02", "url": "https://i.ibb.co/Rh0ksQs/Wood041-1-K-Color.jpg", "texture": 2 }, { "name": "Madera 03", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 3 }, { "name": "Madera 04", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 4 }, { "name": "Madera 05", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 5 }, { "name": "Madera 06", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 6 }, { "name": "Madera 07", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 7 }, { "name": "Madera 08", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 8 }, { "name": "Madera 09", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 9 }, { "name": "Madera 10", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 10 }, { "name": "Madera 11", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 11 }, { "name": "Madera 12", "url": "https://i.ibb.co/DGgKXgL/Wood-Floor011-2-K-Color.jpg", "texture": 12 },
                ],
                "default": 0
            },

            // Opcion 2. para cambiar colores
            {
                "name": "Color",
                "type": "color",
                "material": "COLOR VARIABLE ",
                "default": "#628cac"
            },

            // // Opcion 3. toggle
            // {
            //     "name": "Toggle",
            //     "type": "visible",
            //     "selector": "[instance=\"1652\"]",
            //     "default": true
            // },

            // // Opcion 4. Select
            // {
            //     "name": "Select",
            //     "type": "select",
            //     "options": [],
            //     "default": 0
            // }

        ]
    };
    var iframeEl = document.getElementById('api-frame');
    var optionsEl = document.querySelector('.options');
    var configurator = new SketchfabConfigurator.Configurator(iframeEl, optionsEl, config);
</script>

<!-- Funcion que registra los cambios del input de mail y que lo envia -->

<!-- <script type="text/javascript">
    var submit = document.querySelector('.submit');
    var mailInput = document.querySelector('.mail-input');
    var submitBtn = document.querySelector('.submit-btn');
    var mail = mailInput.value;
    // get the value of the actual img
    var img = document.getElementById("imageid").alt;

    // submitBtn.addEventListener('click', function () {
    //     mail = mailInput.value;
    //     // send the mail with the img selected
    //     var xhr = new XMLHttpRequest();
    //     xhr.open('POST', './mail.php', true);
    //     xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    //     xhr.send('mail=' + mail + '&img=' + img);
    // });


    submitBtn.addEventListener('click', function () {

        var from = 'satelerd@gmail.com',
            to = 'satelerd@gmail.com',
            body = img,
            subject = 'Hello World Subject';

        // Call sendEmail function
        //
        sendEmail(from, to, body, subject);
    });


    function sendEmail(from, to, body, subject) {
        //Get the relative url of the site
        var siteurl = _spPageContextInfo.webServerRelativeUrl;
        var urlTemplate = siteurl + "/_api/SP.Utilities.Utility.SendEmail";
        $.ajax({
            contentType: 'application/json',
            url: urlTemplate,
            type: "POST",
            data: JSON.stringify({
                'properties': {
                    '__metadata': {
                        'type': 'SP.Utilities.EmailProperties'
                    },
                    'From': from,
                    'To': {
                        'results': [to]
                    },
                    'Body': body,
                    'Subject': subject
                }
            }),
            headers: {
                "Accept": "application/json;odata=verbose",
                "content-type": "application/json;odata=verbose",
                "X-RequestDigest": jQuery("#__REQUESTDIGEST").val()
            },
            success: function (data) {
                alert('Email Sent Successfully');
            },
            error: function (err) {
                alert('Error in sending Email: ' + JSON.stringify(err));
            }
        });
    }

    $(document).ready(function () {

        SP.SOD.executeFunc('sp.js', 'SP.ClientContext', processSendEmails);

    });
</script> -->

</html>